(function(t){function e(e){for(var o,a,d=e[0],s=e[1],c=e[2],u=0,p=[];u<d.length;u++)a=d[u],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(t[o]=s[o]);i&&i(e);while(p.length)p.shift()();return l.push.apply(l,c||[]),n()}function n(){for(var t,e=0;e<l.length;e++){for(var n=l[e],o=!0,d=1;d<n.length;d++){var s=n[d];0!==r[s]&&(o=!1)}o&&(l.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={app:0},l=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var d=window["webpackJsonp"]=window["webpackJsonp"]||[],s=d.push.bind(d);d.push=e,d=d.slice();for(var c=0;c<d.length;c++)e(d[c]);var i=s;l.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2dff":function(t,e,n){"use strict";n("e23a")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r={id:"top-panel"},l=Object(o["d"])("h1",null,"tsv-to-graph",-1),a=Object(o["d"])("span",{id:"top-tsv-span"},"tsv --\x3e|",-1),d=Object(o["d"])("span",{id:"top-graph-span"},"<-- graph",-1),s=Object(o["d"])("input",{id:"search-input"},null,-1),c=Object(o["d"])("button",{id:"search-btn"},"find by id",-1),i=Object(o["d"])("button",{id:"refresh-btn"},"refresh",-1),u=Object(o["d"])("div",{id:"side-panel"},[Object(o["d"])("div",{id:"side-panel_contents"},[Object(o["d"])("button",{id:"import-btn",onclick:"document.getElementById('import-file').click();"},"import from tsv"),Object(o["d"])("input",{id:"import-file",type:"file",style:{display:"none"}}),Object(o["d"])("button",{id:"export-btn"},"export to tsv"),Object(o["d"])("br"),Object(o["d"])("br"),Object(o["e"])(" input tsv "),Object(o["d"])("button",{id:"replace-form-tsv-btn"},"replace all"),Object(o["d"])("button",{id:"tsv-merge-btn"},"nodes merge"),Object(o["d"])("br"),Object(o["d"])("textarea",{id:"import-tsv-textarea",cols:"30",rows:"2",style:{width:"350px","max-width":"350px"}}),Object(o["d"])("br"),Object(o["e"])(" output tsv"),Object(o["d"])("br"),Object(o["d"])("textarea",{id:"export-tsv-textarea",cols:"30",rows:"6",style:{width:"350px","max-width":"350px"}}),Object(o["d"])("br"),Object(o["e"])(" selected node: "),Object(o["d"])("span",{id:"selected-node-span"}),Object(o["d"])("br"),Object(o["d"])("br"),Object(o["d"])("button",{id:"export-svg-btn"},"export svg"),Object(o["d"])("br"),Object(o["d"])("button",{id:"export-meta-btn"},"export Cytoscape.js json"),Object(o["d"])("br"),Object(o["d"])("br"),Object(o["e"])(" powered by Cytoscape.js ")])],-1),p=Object(o["d"])("div",{id:"cy"},null,-1);function g(t,e,n,g,y,f){var b=Object(o["j"])("id");return Object(o["h"])(),Object(o["c"])(o["a"],null,[Object(o["d"])("div",r,[l,a,d,Object(o["f"])(b,{id:"top-left-panel"},{default:Object(o["l"])((function(){return[s,c,i]})),_:1})]),u,p],64)}var y=n("b85c"),f=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("7db0"),n("2b3d"),n("9861"),n("159b"),n("c740"),n("a434"),n("e9c4"),n("44e1")),b=n.n(f),v=n("0f53"),h=n.n(v),m=n("1776"),j=n.n(m),O=n("2701"),x=n.n(O),_="#type\tid\tlabel\tnodeType\tparent\tx\ty\n#====\nnode\tn1\tnode 1\tTypeA\t\t\t\nnode\tn2\tnode 2\tTypeA\t\t\t\nnode\tn3\tnode 3\tTypeA\t\t\t\nnode\tn4\tnode 4\tTypeA\t\t\t\nnode\tn5\tnode 5\tTypeB\tn10\t\t\nnode\tn6\tnode 6\tTypeB\tn10\t\t\nnode\tn7\tnode 7\t\tn11\t\t\nnode\tn8\tnode 8\tTypeC\tn11\t\t\nnode\tn9\tnode 9\t\tn12\t\t\nnode\tn10\tnode 10\t\t\t\t\nnode\tn11\tnode 11\t\tn13\t\t\nnode\tn12\tnode 12\t\tn13\t\t\nnode\tn13\tnode 13\t\t\t\t\n\n#type\tsource\ttarget\ttargetType\n#====\nedge\tn1\tn2\nedge\tn1\tn3\tTypeO\nedge\tn3\tn4\t\nedge\tn2\tn4\tTypeP\nedge\tn4\tn5\nedge\tn5\tn6\nedge\tn7\tn8\nedge\tn6\tn7\tTypeQ\nedge\tn11\tn12\tTypeR\nedge\tn2\tn12\n\n#type\tselector\tbackground-color\tshape\tlabel\tpadding\twidth\theight\ttext-halign\ttext-valign\tbackground-opacity\tborder-color\tborder-style\tborder-width\n#====\t\t\t\t\t\t\t\t\t\t\t\t\t\nnode-style\tnode\t#ddd\tround-rectangle\tdata(label)\t10px\tlabel\tlabel\tcenter\tcenter\t\t\t\t\nnode-style\tnode.normalNode\t#ff7f7f\t\t\t\t\t\t\t\t\t\t\t\nnode-style\tnode:parent\t#7f7fff\t\tdata(label)\t10px\t\t\tcenter\ttop\t0.1\t\t\t\nnode-style\tnode.__position-locked__\t\t\t\t\t\t\t\t\t\t#000\tsolid\t2px\nnode-style\tnode:selected\t\t\t\t\t\t\t\t\t\t#ff0a0a\tsolid\t3px\nnode-style\tnode.TypeA\t#7fbfff\t\nnode-style\tnode.TypeB\t\tround-octagon\nnode-style\tnode.TypeC\t#ff7f7f\tellipse\n\n#type\tselector\tline-color\tline-style\tcurve-style\ttarget-arrow-shape\n#====\t\t\t\t\t\nedge-style\tedge\t\t\tbezier\ttriangle\nedge-style\tedge.TypeO\trgb(191,127,255)\tsolid\t\t\nedge-style\tedge.TypeP\t\tdotted\t\t\nedge-style\tedge.TypeQ\trgb(255,191,127)\t\t\t\nedge-style\tedge.TypeR\trgb(255,191,127)\tdashed\t\t\nedge-style\tedge:selected\t#ff0a0a\t\t\t\n";function k(t,e,n,o){var r=[{id:"lockPosition",content:"lock position",tooltipText:"lock position",selector:"node[!.__position-locked__]",onClickFunction:function(e){var n=e.target||e.cyTarget;t(n)}},{id:"unlockPosition",content:"unlock position",tooltipText:"unlock position",selector:"node.__position-locked__",onClickFunction:function(t){var n=t.target||t.cyTarget;e(n)},hasTrailingDivider:!0},{id:"selectFirstNeighborhood",content:"select first neighborhood",tooltipText:"select first neighborhood",selector:"node",onClickFunction:function(t){var e=t.target||t.cyTarget;n(e)}},{id:"deleteNodes",content:"delete nodes",tooltipText:"delete nodes",selector:"node",onClickFunction:function(t){var e=t.target||t.cyTarget;o(e)}}];return r}n("ac1f"),n("1276"),n("2ca0");function w(t){var e,n=[],o=[],r=[],l=[],a=[],d=new Set,s=t.split("\n"),c=Object(y["a"])(s);try{for(c.s();!(e=c.n()).done;){var i=e.value;if(i&&!i.empty&&!i.startsWith("#")&&!i.startsWith("\t")){var u=i.split("\t");if("node"==u[0]&&u.length>=3){var p=I(r,u);n.push(p),d.add(p.data.id)}else if("edge"==u[0]&&u.length>=2){var g=E(u);o.push(g)}else if("node-style"==u[0]&&u.length>=3){var f=u[1],b=u.length>=3?u[2]:null,v=u.length>=4?u[3]:null,h=u.length>=5?u[4]:null,m=u.length>=6?u[5]:null,j=u.length>=7?u[6]:null,O=u.length>=8?u[7]:null,x=u.length>=9?u[8]:null,_=u.length>=10?u[9]:null,k=u.length>=11?u[10]:null,w=u.length>=12?u[11]:null,T=u.length>=13?u[12]:null,B=u.length>=14?u[13]:null;l.push({selector:f,backgroundColor:b,shape:v,label:h,padding:m,width:j,height:O,text_halign:x,text_valign:_,background_opacity:k,border_color:w,border_style:T,border_width:B})}else if("edge-style"==u[0]&&u.length>=2){var S=u[1],C=u.length>=3?u[2]:null,A=u.length>=4?u[3]:null,L=u.length>=5?u[4]:null,P=u.length>=6?u[5]:null;a.push({selector:S,lineColor:C,lineStyle:A,curveStyle:L,targetArrowShape:P})}else console.error("tsv err line:"+i)}}}catch(Q){c.e(Q)}finally{c.f()}for(var N=new Set,F=0,M=o;F<M.length;F++){var R=M[F];d.has(R.data.source)||N.add(R.data.source),d.has(R.data.target)||N.add(R.data.target)}var W,J=Object(y["a"])(N);try{for(J.s();!(W=J.n()).done;){var U=W.value,D={data:{id:U,label:U}};n.push(D)}}catch(Q){J.e(Q)}finally{J.f()}return{nodes:n,edges:o,lockNodes:r,nodeStyles:l,lineStyles:a}}function I(t,e){var n=e[1],o=e[2],r=e.length>=4?e[3]:null,l=e.length>=5&&e[4]?e[4]:null,a=e.length>=6?e[5]:null,d=e.length>=7?e[6]:null,s={data:{id:n,label:o}},c=r?r.split(" "):[];return a&&d&&c.push("__position-locked__"),s["classes"]=c,s.data["parent"]=l,a&&d&&t.push({nodeId:n,position:{x:parseInt(a),y:parseInt(d)}}),s}function E(t){var e=t[1],n=t[2],o=t.length>=4?t[3]:null,r={data:{id:e+"_"+n,source:e,target:n}},l=o?o.split(" "):[];return r["classes"]=l,r}var T="#====\n";function B(t,e){var n=t.json(),o="";o+=S(t.nodes(),e),o+="\n",o+=C(t.edges());var r=[],l=[];if(n.style){var a,d=Object(y["a"])(n.style);try{for(d.s();!(a=d.n()).done;){var s=a.value,c=s.selector;c.startsWith("node")?r.push(s):c.startsWith("edge")?l.push(s):console.warn("skip selector::"+c)}}catch(D){d.e(D)}finally{d.f()}}o+="\n";var i="#type\tselector\tbackground-color\tshape\tlabel\tpadding\twidth\theight\ttext-halign\ttext-valign\tbackground-opacity\tborder-color\tborder-style\tborder-width\n";if(o+=i,o+=T,r.length>0){var u,p=Object(y["a"])(r);try{for(p.s();!(u=p.n()).done;){var g=u.value,f=g.selector,b=g.style["background-color"]||"",v=g.style["shape"]||"",h=g.style["label"]||"",m=g.style["padding"]||"",j=g.style["width"]||"",O=g.style["height"]||"",x=g.style["text-halign"]||"",_=g.style["text-valign"]||"",k=g.style["background-opacity"]||"",w=g.style["border-color"]||"",I=g.style["border-style"]||"",E=g.style["border-width"]||"",B="node-style\t";B+=f+"\t",B+=b+"\t",B+=v+"\t",B+=h+"\t",B+=m+"\t",B+=j+"\t",B+=O+"\t",B+=x+"\t",B+=_+"\t",B+=k+"\t",B+=w+"\t",B+=I+"\t",B+=E+"\n",o+=B}}catch(D){p.e(D)}finally{p.f()}}else o+="#empty node-styles\n";o+="\n";var A="#type\tselector\tline-color\tline-style\tcurve-style\ttarget-arrow-shape\n";if(o+=A,o+=T,l.length>0){var L,P=Object(y["a"])(l);try{for(P.s();!(L=P.n()).done;){var N=L.value,F=N.selector,M=N.style["line-color"]||"",R=N.style["line-style"]||"",W=N.style["curve-style"]||"",J=N.style["target-arrow-shape"]||"",U="edge-style\t";U+=F+"\t",U+=M+"\t",U+=R+"\t",U+=W+"\t",U+=J+"\n",o+=U}}catch(D){P.e(D)}finally{P.f()}}else o+="#empty edge-styles\n";return o}function S(t,e){var n="#type\tnodeId\tlabel\tnodeType\tparentNodeId\tx\ty\n",o=n;if(o+=T,!t||0==t.length)return o+="#empty nodes\n",o;var r,l=Object(y["a"])(t.jsons());try{for(l.s();!(r=l.n()).done;){var a,d=r.value,s=d.data.id,c=d.data.label,i=d.classes||"",u=d.data.parent||"",p=[],g=Object(y["a"])(i.split(" "));try{for(g.s();!(a=g.n()).done;){var f=a.value;f&&"__position-locked__"!=f&&p.push(f)}}catch(j){g.e(j)}finally{g.f()}var b=e.has(s),v=b?parseInt(d.position.x):"",h=b?parseInt(d.position.y):"",m="node\t"+s+"\t"+c+"\t"+p+"\t"+u+"\t"+v+"\t"+h;o+=m+"\n"}}catch(j){l.e(j)}finally{l.f()}return o}function C(t){var e="#type\tsourceNodeId\ttargetNodeId\n",n=e;if(n+=T,!t||0==t.length)return n+="#empty edges\n",n;var o,r=Object(y["a"])(t.jsons());try{for(r.s();!(o=r.n()).done;){var l=o.value,a=l.data.source,d=l.data.target,s=l.classes||"",c="edge\t"+a+"\t"+d+"\t"+s;n+=c+"\n"}}catch(i){r.e(i)}finally{r.f()}return n}function A(t,e){var n="",o=t.collection();return t.nodes(":selected").forEach((function(t){console.log("node="+t.id()),o=o.union(t)})),console.log("nodeList="+o.length),n+=S(o,e),n+="\n",n+=C(t.edges(":selected")),n}var L={getElmFromEvent:function(t,e){return e.target?e.target===t?null:e.target.data?e.target:null:null}};b.a.use(h.a),b.a.use(j.a),b.a.use(x.a);var P=b()(),N=new Set;function F(t){var e,n=[],o=Object(y["a"])(N.values());try{var r=function(){var o=e.value,r=P.getElementById(o);if(r||console.warn("node is nothing. id="+o),t){var l=t.find((function(t){return t.nodeId==o})),a=r.id(),d=l.position.x,s=l.position.y;n.push({nodeId:a,position:{x:parseInt(d),y:parseInt(s)}})}else{var c=r.id(),i=r.position().x,u=r.position().y;n.push({nodeId:c,position:{x:parseInt(i),y:parseInt(u)}})}};for(o.s();!(e=o.n()).done;)r()}catch(l){o.e(l)}finally{o.f()}P.layout({name:"fcose",fixedNodeConstraint:n}).run()}function M(t){var e=w(t);P.elements().remove(),P.json({elements:{nodes:e.nodes,edges:e.edges}}),N.clear();var n,o=Object(y["a"])(e.lockNodes);try{for(o.s();!(n=o.n()).done;){var r=n.value;N.add(r.nodeId)}}catch(f){o.e(f)}finally{o.f()}F(e.lockNodes),P.style().resetToDefault().update();var l,a=[],d=Object(y["a"])(e.nodeStyles);try{for(d.s();!(l=d.n()).done;){var s=l.value,c={};s.backgroundColor&&(c["background-color"]=s.backgroundColor),s.shape&&(c["shape"]=s.shape),s.label&&(c["label"]=s.label),s.padding&&(c["padding"]=s.padding),s.width&&(c["width"]=s.width),s.height&&(c["height"]=s.height),s.text_halign&&(c["text-halign"]=s.text_halign),s.text_valign&&(c["text-valign"]=s.text_valign),s.background_opacity&&(c["background-opacity"]=s.background_opacity),s.border_color&&(c["border-color"]=s.border_color),s.border_style&&(c["border-style"]=s.border_style),s.border_width&&(c["border-width"]=s.border_width),a.push({selector:s.selector,style:c})}}catch(f){d.e(f)}finally{d.f()}var i,u=Object(y["a"])(e.lineStyles);try{for(u.s();!(i=u.n()).done;){var p=i.value,g={};p.lineColor&&(g["line-color"]=p.lineColor,g["target-arrow-color"]=p.lineColor),p.lineStyle&&(g["line-style"]=p.lineStyle),p.curveStyle&&(g["curve-style"]=p.curveStyle),p.targetArrowShape&&(g["target-arrow-shape"]=p.targetArrowShape),a.push({selector:p.selector,style:g})}}catch(f){u.e(f)}finally{u.f()}P.style(a).update()}function R(t){var e,n=w(t),o=Object(y["a"])(n.nodes);try{for(o.s();!(e=o.n()).done;){var r=e.value,l=r.data.id,a=P.getElementById(l);if(a.data()){a.data("label",r.data.label),a.data("parent",r.data.parent),N.has(l)&&r.classes.push("__position-locked__"),a.classes(r.classes);var d=r.data.parent;a.move({parent:d})}else P.add(r)}}catch(f){o.e(f)}finally{o.f()}var s,c=Object(y["a"])(n.edges);try{for(c.s();!(s=c.n()).done;){var i=s.value,u=i.data.id,p=P.getElementById(u);if(p.data()){var g=i.classes;p.classes(g)}else P.add(i)}}catch(f){c.e(f)}finally{c.f()}}var W=function(){var t=P.svg({scale:1,full:!0}),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(e);return n},J=function(t){if(!t.isParent()){var e=P.collection();e=e.union(t),P.nodes(":selected").forEach((function(t){e=e.union(t)})),e.forEach((function(t){t.addClass("__position-locked__");var e=t.id();N.add(e)}))}},U=function(t){if(!t.isParent()){t.removeClass("__position-locked__");var e=N.data.findIndex((function(e){return e==t.id()}));N.data.splice(e,1)}},D=function(t){var e=t.edgesWith("*").connectedNodes();e.select()},Q=function(t){var e=P.collection();e=e.union(t),P.nodes(":selected").forEach((function(t){e=e.union(t)})),e.remove()},z=function(t,e){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),n.setAttribute("download",t),n.click()};function H(){P=b()({container:document.getElementById("cy")});var t=P.contextMenus();t.appendMenuItems(k(J,U,D,Q)),document.getElementById("refresh-btn").addEventListener("click",(function(){F()})),document.getElementById("import-file").addEventListener("change",(function(t){var e=t.target.files[0],n=new FileReader;n.addEventListener("load",(function(t){var e=t.target.result;M(e)})),n.readAsText(e)})),document.getElementById("export-btn").addEventListener("click",(function(){var t=B(P,N);z("graph.tsv",t)})),document.getElementById("export-meta-btn").addEventListener("click",(function(){var t=JSON.stringify(P.json());z("meta.json",t)})),P.on("click",(function(t){var e=document.getElementById("selected-node-span"),n=L.getElmFromEvent(P,t);e.innerHTML=n?"["+n.id()+"]:"+n.data().label:"";var o=A(P,N);document.getElementById("export-tsv-textarea").value=o})),document.getElementById("export-svg-btn").addEventListener("click",(function(){var t=document.createElement("a");t.setAttribute("href",W()),t.setAttribute("download","graph.svg"),t.click()})),document.getElementById("replace-form-tsv-btn").addEventListener("click",(function(){var t=document.getElementById("import-tsv-textarea").value;M(t)})),document.getElementById("tsv-merge-btn").addEventListener("click",(function(){var t=document.getElementById("import-tsv-textarea").value;R(t)})),document.getElementById("search-btn").addEventListener("click",(function(){var t=document.getElementById("search-input").value;P.elements().unselect(),P.getElementById(t).select()})),M(_)}var q={name:"App",components:{},mounted:function(){H()}},G=(n("2dff"),n("6b0d")),K=n.n(G);const V=K()(q,[["render",g]]);var X=V,Y=n("5502"),Z=Object(Y["a"])({state:{},mutations:{},actions:{},modules:{}});Object(o["b"])(X).use(Z).mount("#app")},e23a:function(t,e,n){}});
//# sourceMappingURL=app.9b486467.js.map