(function(e){function t(t){for(var o,d,l=t[0],s=t[1],c=t[2],u=0,p=[];u<l.length;u++)d=l[u],Object.prototype.hasOwnProperty.call(a,d)&&a[d]&&p.push(a[d][0]),a[d]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);i&&i(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(o=!1)}o&&(r.splice(t--,1),e=d(d.s=n[0]))}return e}var o={},a={app:0},r=[];function d(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,d),n.l=!0,n.exports}d.m=e,d.c=o,d.d=function(e,t,n){d.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},d.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.t=function(e,t){if(1&t&&(e=d(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(d.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)d.d(n,o,function(t){return e[t]}.bind(null,o));return n},d.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return d.d(t,"a",t),t},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var i=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2dff":function(e,t,n){"use strict";n("e23a")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),a={id:"top-panel"},r=Object(o["d"])("h1",null,"tsv-to-graph",-1),d=Object(o["d"])("span",{id:"top-tsv-span"},"tsv --\x3e|",-1),l=Object(o["d"])("span",{id:"top-graph-span"},"<-- graph",-1),s=Object(o["d"])("input",{id:"search-input"},null,-1),c=Object(o["d"])("button",{id:"search-btn"},"find by id",-1),i=Object(o["d"])("button",{id:"refresh-btn"},"refresh",-1),u=Object(o["d"])("div",{id:"side-panel"},[Object(o["d"])("div",{id:"side-panel_contents"},[Object(o["d"])("button",{id:"import-btn",onclick:"document.getElementById('import-file').click();"},"import from tsv"),Object(o["d"])("input",{id:"import-file",type:"file",style:{display:"none"}}),Object(o["d"])("button",{id:"export-btn"},"export to tsv"),Object(o["d"])("br"),Object(o["d"])("br"),Object(o["e"])(" input tsv "),Object(o["d"])("button",{id:"replace-form-tsv-btn"},"replace all"),Object(o["d"])("button",{id:"tsv-merge-btn"},"nodes merge"),Object(o["d"])("br"),Object(o["d"])("textarea",{id:"import-tsv-textarea",cols:"30",rows:"2",style:{width:"350px","max-width":"350px"}}),Object(o["d"])("br"),Object(o["e"])(" output tsv"),Object(o["d"])("br"),Object(o["d"])("textarea",{id:"export-tsv-textarea",cols:"30",rows:"6",style:{width:"350px","max-width":"350px"}}),Object(o["d"])("br"),Object(o["e"])(" selected node: "),Object(o["d"])("span",{id:"selected-node-span"}),Object(o["d"])("br"),Object(o["d"])("br"),Object(o["d"])("button",{id:"export-svg-btn"},"export svg"),Object(o["d"])("br"),Object(o["d"])("button",{id:"export-meta-btn"},"export Cytoscape.js json"),Object(o["d"])("br"),Object(o["d"])("br"),Object(o["e"])(" powered by Cytoscape.js ")])],-1),p=Object(o["d"])("div",{id:"cy"},null,-1);function f(e,t,n,f,v,y){var b=Object(o["j"])("id");return Object(o["h"])(),Object(o["c"])(o["a"],null,[Object(o["d"])("div",a,[r,d,l,Object(o["f"])(b,{id:"top-left-panel"},{default:Object(o["l"])((function(){return[s,c,i]})),_:1})]),u,p],64)}var v=n("3835"),y=n("b85c"),b=(n("d3b7"),n("6062"),n("3ca3"),n("ddb0"),n("7db0"),n("2b3d"),n("9861"),n("159b"),n("c740"),n("a434"),n("a630"),n("e9c4"),n("44e1")),g=n.n(b),h=n("0f53"),m=n.n(h),j=n("1776"),O=n.n(j),x=n("2701"),k=n.n(x),_="#type\tid\tlabel\tnodeType\tparent\tx\ty\n#====\nnode\tn1\tnode 1\tTypeA\t\t\t\nnode\tn2\tnode 2\tTypeA\t\t\t\nnode\tn3\tnode 3\tTypeA\t\t\t\nnode\tn4\tnode 4\tTypeA\t\t\t\nnode\tn5\tnode 5\tTypeB\tn10\t\t\nnode\tn6\tnode 6\tTypeB\tn10\t\t\nnode\tn7\tnode 7\t\tn11\t\t\nnode\tn8\tnode 8\tTypeC\tn11\t\t\nnode\tn9\tnode 9\t\tn12\t\t\nnode\tn10\tnode 10\t\t\t\t\nnode\tn11\tnode 11\t\tn13\t\t\nnode\tn12\tnode 12\t\tn13\t\t\nnode\tn13\tnode 13\t\t\t\t\n\n#type\tsource\ttarget\ttargetType\n#====\nedge\tn1\tn2\nedge\tn1\tn3\tTypeO\nedge\tn3\tn4\t\nedge\tn2\tn4\tTypeP\nedge\tn4\tn5\nedge\tn5\tn6\nedge\tn7\tn8\nedge\tn6\tn7\tTypeQ\nedge\tn11\tn12\tTypeR\nedge\tn2\tn12\n\n#type\tselector\tbackground-color\tshape\n#====\nnode-style\tnode.TypeA\t#7fbfff\t\nnode-style\tnode.TypeB\t\tround-octagon\nnode-style\tnode.TypeC\t#ff7f7f\tellipse\n\n#type\tselector\tline-color\tline-style\n#====\nedge-style\tedge.TypeO\t#bf7fff\tsolid\nedge-style\tedge.TypeP\t\tdotted\nedge-style\tedge.TypeQ\t#ffbf7f\nedge-style\tedge.TypeR\t#ffbf7f\tdashed\n";n("4ec9");function I(){var e=new Map;return e.set("node",{shape:"round-rectangle","background-color":"#ddd",label:"data(label)",padding:"10px",width:"label",height:"label","text-halign":"center","text-valign":"center"}),e.set("node.normalNode",{"background-color":"#ff7f7f"}),e.set(":parent",{"background-color":"#7f7fff",label:"data(label)",padding:"10px","text-halign":"center","text-valign":"top","background-opacity":.1}),e.set("node.__position-locked__",{"border-width":"2px","border-style":"solid","border-color":"black"}),e.set("node:selected",{"border-width":"3px","border-style":"solid","border-color":"#ff0a0a"}),e.set("edge",{"target-arrow-shape":"triangle","curve-style":"bezier"}),e.set("edge:selected",{"line-color":"#ff0a0a"}),e}function E(e,t,n,o){var a=[{id:"lockPosition",content:"lock position",tooltipText:"lock position",selector:"node[!.__position-locked__]",onClickFunction:function(t){var n=t.target||t.cyTarget;e(n)}},{id:"unlockPosition",content:"unlock position",tooltipText:"unlock position",selector:"node.__position-locked__",onClickFunction:function(e){var n=e.target||e.cyTarget;t(n)},hasTrailingDivider:!0},{id:"selectFirstNeighborhood",content:"select first neighborhood",tooltipText:"select first neighborhood",selector:"node",onClickFunction:function(e){var t=e.target||e.cyTarget;n(t)}},{id:"deleteNodes",content:"delete nodes",tooltipText:"delete nodes",selector:"node",onClickFunction:function(e){var t=e.target||e.cyTarget;o(t)}}];return a}n("ac1f"),n("1276"),n("2ca0");function T(e){var t,n=[],o=[],a=[],r=[],d=[],l=new Set,s=e.split("\n"),c=Object(y["a"])(s);try{for(c.s();!(t=c.n()).done;){var i=t.value;if(i&&!i.empty&&!i.startsWith("#")&&!i.startsWith("\t")){var u=i.split("\t");if("node"==u[0]&&u.length>=3){var p=w(a,u);n.push(p),l.add(p.data.id)}else if("edge"==u[0]&&u.length>=2){var f=B(u);o.push(f)}else if("node-style"==u[0]&&u.length>=3){var v=u[1],b=u[2],g=u.length>=4?u[3]:null;r.push({selector:v,backgroundColor:b,shape:g})}else if("edge-style"==u[0]&&u.length>=2){var h=u[1],m=u.length>=3?u[2]:null,j=u.length>=4?u[3]:null;d.push({selector:h,lineColor:m,lineStyle:j})}else console.error("tsv err line:"+i)}}}catch(S){c.e(S)}finally{c.f()}for(var O=new Set,x=0,k=o;x<k.length;x++){var _=k[x];l.has(_.data.source)||O.add(_.data.source),l.has(_.data.target)||O.add(_.data.target)}var I,E=Object(y["a"])(O);try{for(E.s();!(I=E.n()).done;){var T=I.value,C={data:{id:T,label:T}};n.push(C)}}catch(S){E.e(S)}finally{E.f()}return{nodes:n,edges:o,lockNodes:a,nodeStyles:r,lineStyles:d}}function w(e,t){var n=t[1],o=t[2],a=t.length>=4?t[3]:null,r=t.length>=5&&t[4]?t[4]:null,d=t.length>=6?t[5]:null,l=t.length>=7?t[6]:null,s={data:{id:n,label:o}},c=a?a.split(" "):[];return d&&l&&c.push("__position-locked__"),s["classes"]=c,s.data["parent"]=r,d&&l&&e.push({nodeId:n,position:{x:parseInt(d),y:parseInt(l)}}),s}function B(e){var t=e[1],n=e[2],o=e.length>=4?e[3]:null,a={data:{id:t+"_"+n,source:t,target:n}},r=o?o.split(" "):[];return a["classes"]=r,a}var C="#====\n";function S(e,t,n){var o=e.json(),a="";a+=L(e.nodes(),t),a+="\n",a+=P(e.edges());var r=[],d=[];if(o.style){var l,s=Object(y["a"])(o.style);try{for(s.s();!(l=s.n()).done;){var c=l.value,i=c.selector;n.has(i)||(i.startsWith("node.")?r.push(c):i.startsWith("edge.")&&d.push(c))}}catch(w){s.e(w)}finally{s.f()}}a+="\n";var u="#type\tselector\tbackground-color\tshape\n";if(a+=u,a+=C,r.length>0){var p,f=Object(y["a"])(r);try{for(f.s();!(p=f.n()).done;){var v=p.value,b=v.selector,g=v.style["background-color"]||"",h=v.style["shape"]||"",m="node-style\t"+b+"\t"+g+"\t"+h;a+=m+"\n"}}catch(w){f.e(w)}finally{f.f()}}else a+="#empty node-styles\n";a+="\n";var j="#type\tselector\tline-color\tline-style\n";if(a+=j,a+=C,d.length>0){var O,x=Object(y["a"])(d);try{for(x.s();!(O=x.n()).done;){var k=O.value,_=k.selector,I=k.style["line-color"]||"",E=k.style["line-style"]||"",T="edge-style\t"+_+"\t"+I+"\t"+E;a+=T+"\n"}}catch(w){x.e(w)}finally{x.f()}}else a+="#empty edge-styles\n";return a}function L(e,t){var n="#type\tnodeId\tlabel\tnodeType\tparentNodeId\tx\ty\n",o=n;if(o+=C,!e||0==e.length)return o+="#empty nodes\n",o;var a,r=Object(y["a"])(e.jsons());try{for(r.s();!(a=r.n()).done;){var d,l=a.value,s=l.data.id,c=l.data.label,i=l.classes||"",u=l.data.parent||"",p=[],f=Object(y["a"])(i.split(" "));try{for(f.s();!(d=f.n()).done;){var v=d.value;v&&"__position-locked__"!=v&&p.push(v)}}catch(j){f.e(j)}finally{f.f()}var b=t.has(s),g=b?parseInt(l.position.x):"",h=b?parseInt(l.position.y):"",m="node\t"+s+"\t"+c+"\t"+p+"\t"+u+"\t"+g+"\t"+h;o+=m+"\n"}}catch(j){r.e(j)}finally{r.f()}return o}function P(e){var t="#type\tsourceNodeId\ttargetNodeId\n",n=t;if(n+=C,!e||0==e.length)return n+="#empty edges\n",n;var o,a=Object(y["a"])(e.jsons());try{for(a.s();!(o=a.n()).done;){var r=o.value,d=r.data.source,l=r.data.target,s=r.classes||"",c="edge\t"+d+"\t"+l+"\t"+s;n+=c+"\n"}}catch(i){a.e(i)}finally{a.f()}return n}function A(e,t){var n="",o=e.collection();return e.nodes(":selected").forEach((function(e){console.log("node="+e.id()),o=o.union(e)})),console.log("nodeList="+o.length),n+=L(o,t),n+="\n",n+=P(e.edges(":selected")),n}var N={getElmFromEvent:function(e,t){return t.target?t.target===e?null:t.target.data?t.target:null:null}};g.a.use(m.a),g.a.use(O.a),g.a.use(k.a);var F=g()(),M=new Set;function R(e){var t,n=[],o=Object(y["a"])(M.values());try{var a=function(){var o=t.value,a=F.getElementById(o);if(a||console.warn("node is nothing. id="+o),e){var r=e.find((function(e){return e.nodeId==o})),d=a.id(),l=r.position.x,s=r.position.y;n.push({nodeId:d,position:{x:parseInt(l),y:parseInt(s)}})}else{var c=a.id(),i=a.position().x,u=a.position().y;n.push({nodeId:c,position:{x:parseInt(i),y:parseInt(u)}})}};for(o.s();!(t=o.n()).done;)a()}catch(r){o.e(r)}finally{o.f()}F.layout({name:"fcose",fixedNodeConstraint:n}).run()}function W(e){var t=T(e);F.elements().remove(),F.json({elements:{nodes:t.nodes,edges:t.edges}}),M.clear();var n,o=Object(y["a"])(t.lockNodes);try{for(o.s();!(n=o.n()).done;){var a=n.value;M.add(a.nodeId)}}catch(m){o.e(m)}finally{o.f()}R(t.lockNodes),F.style().resetToDefault().update();var r,d=[],l=Object(y["a"])(I().entries());try{for(l.s();!(r=l.n()).done;){var s=Object(v["a"])(r.value,2),c=s[0],i=s[1];d.push({selector:c,style:i})}}catch(m){l.e(m)}finally{l.f()}var u,p=Object(y["a"])(t.nodeStyles);try{for(p.s();!(u=p.n()).done;){var f=u.value;d.push({selector:f.selector,style:{"background-color":f.backgroundColor,shape:f.shape}})}}catch(m){p.e(m)}finally{p.f()}var b,g=Object(y["a"])(t.lineStyles);try{for(g.s();!(b=g.n()).done;){var h=b.value;d.push({selector:h.selector,style:{"line-color":h.lineColor,"target-arrow-color":h.lineColor,"line-style":h.lineStyle}})}}catch(m){g.e(m)}finally{g.f()}F.style(d).update()}function J(e){var t,n=T(e),o=Object(y["a"])(n.nodes);try{for(o.s();!(t=o.n()).done;){var a=t.value,r=a.data.id,d=F.getElementById(r);if(d.data()){d.data("label",a.data.label),d.data("parent",a.data.parent),M.has(r)&&a.classes.push("__position-locked__"),d.classes(a.classes);var l=a.data.parent;d.move({parent:l})}else F.add(a)}}catch(v){o.e(v)}finally{o.f()}var s,c=Object(y["a"])(n.edges);try{for(c.s();!(s=c.n()).done;){var i=s.value,u=i.data.id,p=F.getElementById(u);if(p.data()){var f=i.classes;p.classes(f)}else F.add(i)}}catch(v){c.e(v)}finally{c.f()}}var U=function(){var e=F.svg({scale:1,full:!0}),t=new Blob([e],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(t);return n},D=function(e){if(!e.isParent()){var t=F.collection();t=t.union(e),F.nodes(":selected").forEach((function(e){t=t.union(e)})),t.forEach((function(e){e.addClass("__position-locked__");var t=e.id();M.add(t)}))}},Q=function(e){if(!e.isParent()){e.removeClass("__position-locked__");var t=M.data.findIndex((function(t){return t==e.id()}));M.data.splice(t,1)}},z=function(e){var t=e.edgesWith("*").connectedNodes();t.select()},H=function(e){var t=F.collection();t=t.union(e),F.nodes(":selected").forEach((function(e){t=t.union(e)})),t.remove()},q=function(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.click()};function G(){F=g()({container:document.getElementById("cy")});var e=F.contextMenus();e.appendMenuItems(E(D,Q,z,H)),document.getElementById("refresh-btn").addEventListener("click",(function(){R()})),document.getElementById("import-file").addEventListener("change",(function(e){var t=e.target.files[0],n=new FileReader;n.addEventListener("load",(function(e){var t=e.target.result;W(t)})),n.readAsText(t)})),document.getElementById("export-btn").addEventListener("click",(function(){var e=Array.from(I().keys()),t=new Set(e),n=S(F,M,t);q("graph.tsv",n)})),document.getElementById("export-meta-btn").addEventListener("click",(function(){var e=JSON.stringify(F.json());q("meta.json",e)})),F.on("click",(function(e){var t=document.getElementById("selected-node-span"),n=N.getElmFromEvent(F,e);t.innerHTML=n?"["+n.id()+"]:"+n.data().label:"";var o=A(F,M);document.getElementById("export-tsv-textarea").value=o})),document.getElementById("export-svg-btn").addEventListener("click",(function(){var e=document.createElement("a");e.setAttribute("href",U()),e.setAttribute("download","graph.svg"),e.click()})),document.getElementById("replace-form-tsv-btn").addEventListener("click",(function(){var e=document.getElementById("import-tsv-textarea").value;W(e)})),document.getElementById("tsv-merge-btn").addEventListener("click",(function(){var e=document.getElementById("import-tsv-textarea").value;J(e)})),document.getElementById("search-btn").addEventListener("click",(function(){var e=document.getElementById("search-input").value;F.elements().unselect(),F.getElementById(e).select()})),W(_)}var K={name:"App",components:{},mounted:function(){G()}},V=(n("2dff"),n("6b0d")),X=n.n(V);const Y=X()(K,[["render",f]]);var Z=Y,$=n("5502"),ee=Object($["a"])({state:{},mutations:{},actions:{},modules:{}});Object(o["b"])(Z).use(ee).mount("#app")},e23a:function(e,t,n){}});
//# sourceMappingURL=app.4ee6e9e1.js.map